---
layout: post
title:  "数字华容道"
date: 2023-02-01 15:04:05 +0800
categories: [math]
tags: [math, game]     # TAG names should always be lowercase1
---

## 游戏介绍

![Untitled](/assets/img/2023-02-01-数字华容道/Untitled.png)

从某一随机的局面开始，还原至如图的有序状态。图中是4阶的数字华容道，还有3阶和更高阶的。

## 初体验

在没有任何技巧和经验的情况下，我自己随便尝试，发现还原至初始状态并不容易，1、2排比较好还原但是3、4排就会遇到麻烦。所以我想从数学角度进行一些分析。

## 分析

#### 基础

这个游戏类似于各种封闭规则的棋类活动，可以抽象为一个**有限状态机**，4阶华容道的可能状态（局面）有16！（约2兆）种，目标局面只有一种。

经过我的几次尝试，发现随机开局有时候是无法还原的，所以我猜测所有局面不是全连通的，可能存在孤岛，所以想能够还原必须从目标局面开始按照移动规则来打乱。经过测试确实是这样，全部都可以还原。

#### 一定能还原么

此时我又做了一个实验，以2阶华容道为例，只有3个棋子，如果3颗棋子按序号逆时针摆放，如下图，永远也无法还原。就好比三个孩子手拉手转圈，无论怎么转他们也无法改变时针顺序。所以至少在二阶情况下，存在不可还原的局面。也就是局面图不是**连通图。**

| 1 | 3 |
| --- | --- |
| 2 |  |

然后我又参考了一下网上的还原攻略，常见的方法是：

1. 先还原1、2排，比较简单，几乎不需要什么技巧
2. 13、9，14、10并排走，以竖向还原棋子，先把13、9放入正确位置，再还原14和10
3. 如果是可还原的，此时稍作调整就可以还原了（一般都没提到不可还原的局面）

按上述方法最终会形成两种局面

| 1 | 2 | 3 | 4 |
| --- | --- | --- | --- |
| 5 | 6 | 7 | 8 |
| 9 | 10 | 11 | 12 |
| 13 | 14 | 15 |  |

成功

| 1 | 2 | 3 | 4 |
| --- | --- | --- | --- |
| 5 | 6 | 7 | 8 |
| 9 | 10 | 11 | 15 |
| 13 | 14 | 12 |  |

无解，参考上面对2阶的分析

#### 如何制造不可还原局面

从无解的终态局面去随机打乱就可以的得到一个必无解的局面。因为这两个局面都在一个与目标局面**非连通**的子图中。

#### 结论

1. 确实存在无解的局面
2. 可以从“无解终态”制造无解的局面
3. 有解的情况下，可以用先还原1、2行，在还原13、9，14、10的方法
4. 根据网上的资料，这个问题属于数学中**群论**的内容

## 参考

- [https://blog.csdn.net/tugouxp/article/details/120851905](https://blog.csdn.net/tugouxp/article/details/120851905)